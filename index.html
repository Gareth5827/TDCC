<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Character Reroll</title>
  <style>
    body {
      font-family: sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 30px;
      background-color: #f8f8f8;
    }
    button {
      font-size: 24px;
      padding: 15px 30px;
      margin: 20px;
      cursor: pointer;
    }
    .stat-block {
      margin: 10px;
      font-size: 20px;
    }
  </style>
</head>
<body>

  <button onclick="MakeCharacter()">Reroll</button>

  <div class="stat-block" id="end">END: 0    Health: 23</div>
  <div class="stat-block" id="ins">INS: 0    Mana: 20</div>
  <div class="stat-block" id="wit">WIT: 0    Mana Regen: 3</div>
  <div class="stat-block" id="agi">AGI: 0    Swiftness: 10</div>
  <div class="stat-block" id="all">ALL: 0    Spirit: 10</div>
  <div class="stat-block" id="pwr">PWR: 0    Advantage: 0</div>
  
      <div id="proficiencies" style="margin-left: 30px; padding: 10px; border: 1px solid #ccc; width: 250px;">
  <strong>Proficiencies:</strong><br>
</div>

  <script>
  const baseStats = {
    END: 0, INS: 0, WIT: 0, AGI: 0, ALL: 0, PWR: 0
  };

  const baseEffects = {
    Health: 23,
    Mana: 20,
    ManaRegen: 3,
    Swiftness: 10,
    Spirit: 10,
    Advantage: 0
  };

 rollEffects = {
    10: { Mana: 4, WIT: 3, INS: 1 },
    11: { Mana: 5, ALL: 2, INS: 1 },
    12: { AGI: 4, PWR: 2 },
    13: { END: 3, WIT: 2, Swiftness: 1 },
    14: { Health: 3, END: 3, PWR: 2 },
    15: { WIT: 2, Swiftness: 1, Spirit: 1 },
    16: { Health: 3, END: 2, INS: 2, WIT: 1 },
    17: { Health: 6, END: 4, Swiftness: -2, Spirit: -2 },
    18: { AGI: 2, WIT: 2, ALL: 1 },
    19: { Mana: 4, END: 3, PWR: 1, ManaRegen: 1 },
    20: { Mana: 5, INS: 4, WIT: 1 },
    21: { INS: 2, ALL: 2, WIT: 1 },
    22: { Health: 3, Mana: 3, INS: 2, ALL: 2 },
    23: { PWR: 3, AGI: 2, END: 2 },
    24: { Health: 5, INS: 2, Spirit: 1 },
    25: { Mana: 5, PWR: 2, INS: 2, ManaRegen: 1 },
    26: { INS: 3, WIT: 3 },
    27: { Health: 5, PWR: 3, END: 2 },
    28: { Speed: 5, END: 4, PWR: 2 },
    29: { Mana: 4, AGI: 3, WIT: 2 },
    30: { Mana: 5, WIT: 3, INS: 3 },
    31: { Mana: 8, INS: 2, WIT: 2 },
    32: { END: 3, PWR: 2 },
    33: { INS: 4, WIT: 2, ALL: 2 },
    34: { Speed: 5, ALL: 3, PWR: 2 },
    35: { Health: 5, PWR: 2, END: 2, INS: 2 },
    36: { END: 3, WIT: 3, Swiftness: 2, Spirit: 1 },
    37: { END: 2, Swiftness: 2, Spirit: 2 },
    38: { AGI: 3, ALL: 2, PWR: 1 },
    39: { Health: 5, PWR: 5 },
    40: { INS: 3, WIT: 2, END: 1 },
    41: { Mana: 15, WIT: 3 },
    42: { Health: 8, Speed: 5, PWR: 3 },
    43: { Speed: 5, Swiftness: 1, AGI: 3, PWR: 2 },
    44: { Health: 8, END: 3, PWR: 2 },
    45: { Spirit: 2, INS: 3 },
    46: { Health: 6, END: 3, INS: 3 },
    47: { Swiftness: -8, Spirit: -8, PWR: 5, AGI: 5, ALL: 5, Health: 10 },
    48: { PWR: 3, AGI: 3, Spirit: 1 },
    49: { Mana: 6, PWR: 3, INS: 3 },
    50: { Mana: 7, END: 4, WIT: 1 },
    51: { Health: 4, Mana: 4, ManaRegen: 1, Spirit: 1 },
    52: { INS: 3, WIT: 3, Spirit: 1 },
    53: { END: 4, PWR: 3, Swiftness: 2 },
    54: { INS: 3, WIT: 3, Spirit: 2, Swiftness: 1 },
    55: { Mana: 5, END: 2, INS: 2, WIT: 1 },
    56: { Mana: 7, Health: 5, Swiftness: 1 },
    57: { Mana: 8, INS: 2, WIT: 1 },
    58: { Speed: 5, PWR: 3, AGI: 1, Swiftness: 1 },
    59: { AGI: 4, ALL: 3 },
    60: { INS: 3, PWR: 2 },
    61: { PWR: 3, Swiftness: 1 },
    62: { AGI: 3, ALL: 2 },
    63: { Speed: 5, PWR: 2, AGI: 2, ALL: 2 },
    64: { Mana: 10, INS: 3, WIT: 1 },
    65: { Speed: 5, INS: 2, WIT: 2 },
    66: { INS: 4, ALL: 4, AGI: 2 },
    67: { Speed: 5, PWR: 2, AGI: 2, ALL: 2 },
    68: { Mana: 4, INS: 2, AGI: 2, Spirit: 1 },
    69: { Health: 10, PWR: 5, AGI: 5, ALL: 5, Swiftness: -7, Spirit: -7 }
}

    const proficiencyEffects = {
  10: { Arcana: 1, Foresight: 1, Taming: 1 },
  11: { Performance: 2, Foresight: 1 },
  12: { Stealth: 2, Athletics: 1 },
  13: { Taming: 2, Arcana: 1 },
  14: { Might: 2, Survival: 1 },
  15: { Might: 1, Perception: 1, Foresight: 1 },
  16: { Perception: 1 },
  17: { Survival: 1, Resist: 1 },
  18: { Theft: 1, Persuasion: 1 },
  19: { Survival: 1, Resist: 1, Athletics: 1 },
  20: { Arcana: 2, Perception: 1 },
  21: { Arcana: 2, Taming: 1 },
  22: { Performance: 2, Arcana: 1 },
  23: { Might: 2, Resist: 1 },
  24: { Resist: 1, Survival: 1, Performance: 1 },
  25: { Survival: 2, Athletics: 1 },
  26: { Might: 1, Theft: 1, Persuasion: 1 },
  27: { Athletics: 2, Stealth: 1 },
  28: { Stealth: 2, Theft: 1 },
  29: { Taming: 2, Athletics: 1 },
  30: { Foresight: 2, Survival: 1 },
  31: { Performance: 2, Survival: 1 },
  32: { Might: 2 },
  33: { Stealth: 1, Resist: 1 },
  35: { Resist: 2 },
  36: { Survival: 1, Arcana: 1 },
  37: { Might: 1, Performance: 1, Arcana: 1 },
  38: { Taming: 2, Survival: 1 },
  39: { Athletics: 1, Might: 1, Survival: 1 },
  40: { Taming: 2 },
  41: { Perception: 1, Arcana: 1, Foresight: 1 },
  42: { Athletics: 1, Survival: 1, Foresight: 1 },
  43: { Theft: 2, Stealth: 1 },
  44: { Might: 3 },
  45: { Arcana: 2, Might: 1 },
  46: { Survival: 2, Arcana: 1 },
  47: { Perception: 1 },
  48: { Survival: 1, Perception: 1 },
  49: { Survival: 1 },
  50: { Stealth: 1, Survival: 1 },
  51: { Performance: 3 },
  52: { Stealth: 1, Performance: 1, Arcana: 1 },
  53: { Athletics: 2, Survival: 1 },
  54: { Taming: 2, Survival: 1 },
  55: { Perception: 2, Arcana: 1 },
  56: { Perception: 2 },
  57: { Performance: 2, Athletics: 1 },
  58: { Survival: 1, Persuasion: 1, Performance: 1 },
  59: { Stealth: 3 },
  60: { Might: 1, Taming: 1, Foresight: 1 },
  61: { Might: 1, Taming: 1 },
  62: { Taming: 2 },
  63: { Might: 1, Arcana: 1 },
  64: { Arcana: 2, Performance: 1 },
  65: { Arcana: 2, Foresight: 1 },
  66: { Perception: 2 },
  67: { Athletics: 1 },
  68: { Survival: 1, Arcana: 1 },
  69: { Might: 2, Survival: 1 }
};

  const opposites = {
    PWR: "WIT",
    WIT: "PWR",
    AGI: "INS",
    INS: "AGI",
    END: "ALL",
    ALL: "END"
  };

function MakeCharacter() {
  // Reset stats and attributes
  let stats = { END: 0, INS: 0, WIT: 0, AGI: 0, ALL: 0, PWR: 0 };
  let effects = { ...baseEffects };

  // Pick two unique numbers
  let roll1 = getRandomInt(10, 69);
  let roll2;
  do {
    roll2 = getRandomInt(10, 69);
  } while (roll2 === roll1);

  const rolls = [roll1, roll2];

  // Apply bonuses
  rolls.forEach(roll => {
    const bonuses = rollEffects[roll];
    if (bonuses) {
      for (let key in bonuses) {
        if (stats.hasOwnProperty(key)) {
          stats[key] += bonuses[key];
        } else if (effects.hasOwnProperty(key)) {
          effects[key] += bonuses[key];
        }
      }
    }
  });

  // Apply opposite stat subtractions
  for (let stat in stats) {
    const opposite = opposites[stat];
    if (opposite && stats[stat] > 0) {
      stats[opposite] -= stats[stat];
    }
  }

  // Apply final stat effects (only those derived from stats)
  effects.Health = baseEffects.Health + (stats.END || 0);
  effects.Mana = effects.Mana + (stats.INS || 0); // Already includes bonus mana above
  effects.ManaRegen = baseEffects.ManaRegen + (stats.WIT || 0);

  // ✅ Place this line right after calculating ManaRegen:
  if (effects.ManaRegen < 1) effects.ManaRegen = 1;

  effects.Swiftness = baseEffects.Swiftness + (stats.AGI || 0);
  effects.Spirit = baseEffects.Spirit + (stats.ALL || 0);
  effects.Advantage = baseEffects.Advantage + (stats.PWR || 0);

  // ✅ Place this line here after all stat/effect calculations:
  calculateProficiencies([roll1, roll2]);

  // Update display
  document.getElementById("end").innerText = `END: ${stats.END || 0}    Health: ${effects.Health}`;
  document.getElementById("ins").innerText = `INS: ${stats.INS || 0}    Mana: ${effects.Mana}`;
  document.getElementById("wit").innerText = `WIT: ${stats.WIT || 0}    Mana Regen: ${effects.ManaRegen}`;
  document.getElementById("agi").innerText = `AGI: ${stats.AGI || 0}    Swiftness: ${effects.Swiftness}`;
  document.getElementById("all").innerText = `ALL: ${stats.ALL || 0}    Spirit: ${effects.Spirit}`;
  document.getElementById("pwr").innerText = `PWR: ${stats.PWR || 0}    Advantage: ${effects.Advantage}`;
}

    function calculateProficiencies(rolls) {
  let profs = {};

  rolls.forEach(roll => {
    const bonuses = proficiencyEffects[roll];
    if (bonuses) {
      for (let key in bonuses) {
        if (!profs[key]) profs[key] = 0;
        profs[key] += bonuses[key];
      }
    }
  });

  // Build and display the proficiency text
  let profText = "<strong>Proficiencies:</strong><br>";
  for (let key in profs) {
    profText += `+${profs[key]} ${key}<br>`;
  }
  document.getElementById("proficiencies").innerHTML = profText;
}

  function getRandomInt(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
  }
</script>

</body>
</html>
